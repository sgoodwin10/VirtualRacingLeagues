<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Season Form - Wizard Design</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --carbon-dark: #0a0a0a;
      --carbon-mid: #141414;
      --carbon-light: #1e1e1e;
      --neon-red: #ff1744;
      --neon-red-glow: rgba(255, 23, 68, 0.4);
      --neon-blue: #00e5ff;
      --neon-blue-glow: rgba(0, 229, 255, 0.3);
      --surface-1: #1a1a1a;
      --surface-2: #242424;
      --text-primary: #ffffff;
      --text-secondary: rgba(255, 255, 255, 0.7);
      --text-muted: rgba(255, 255, 255, 0.4);
      --border-subtle: rgba(255, 255, 255, 0.08);
      --success: #00e676;
      --warning: #ffab00;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Rajdhani', sans-serif;
      background: var(--carbon-dark);
      color: var(--text-primary);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      background-image:
        repeating-linear-gradient(
          0deg,
          transparent,
          transparent 2px,
          rgba(255, 255, 255, 0.015) 2px,
          rgba(255, 255, 255, 0.015) 4px
        ),
        repeating-linear-gradient(
          90deg,
          transparent,
          transparent 2px,
          rgba(255, 255, 255, 0.015) 2px,
          rgba(255, 255, 255, 0.015) 4px
        );
    }

    .wizard-container {
      width: 100%;
      max-width: 900px;
      background: var(--carbon-mid);
      border: 1px solid var(--border-subtle);
      border-radius: 4px;
      overflow: hidden;
      box-shadow:
        0 0 0 1px var(--neon-red-glow),
        0 25px 50px -12px rgba(0, 0, 0, 0.8),
        inset 0 1px 0 rgba(255, 255, 255, 0.05);
    }

    /* Header */
    .wizard-header {
      background: linear-gradient(135deg, var(--carbon-dark) 0%, var(--carbon-mid) 100%);
      padding: 2rem 2.5rem;
      border-bottom: 1px solid var(--border-subtle);
      position: relative;
      overflow: hidden;
    }

    .wizard-header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--neon-red), var(--neon-blue));
    }

    .wizard-header::after {
      content: '';
      position: absolute;
      top: 3px;
      left: 0;
      right: 0;
      height: 20px;
      background: linear-gradient(180deg, var(--neon-red-glow), transparent);
      opacity: 0.3;
    }

    .header-content {
      display: flex;
      align-items: center;
      gap: 1.5rem;
    }

    .header-icon {
      width: 56px;
      height: 56px;
      background: var(--surface-1);
      border: 2px solid var(--neon-red);
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 20px var(--neon-red-glow);
    }

    .header-icon svg {
      width: 28px;
      height: 28px;
      fill: var(--neon-red);
    }

    .header-text h1 {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.5rem;
      font-weight: 700;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      margin-bottom: 0.25rem;
    }

    .header-text p {
      font-size: 0.9rem;
      color: var(--text-secondary);
      font-weight: 500;
    }

    .mode-badge {
      margin-left: auto;
      padding: 0.5rem 1rem;
      background: var(--neon-red);
      color: white;
      font-family: 'Orbitron', sans-serif;
      font-size: 0.7rem;
      font-weight: 700;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      border-radius: 2px;
      box-shadow: 0 0 15px var(--neon-red-glow);
    }

    /* Stepper */
    .stepper {
      display: flex;
      background: var(--carbon-dark);
      border-bottom: 1px solid var(--border-subtle);
      padding: 0;
    }

    .step {
      flex: 1;
      padding: 1.25rem 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.75rem;
      cursor: pointer;
      position: relative;
      transition: all 0.3s ease;
      border-right: 1px solid var(--border-subtle);
    }

    .step:last-child {
      border-right: none;
    }

    .step::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: transparent;
      transition: background 0.3s ease;
    }

    .step.active::after {
      background: var(--neon-red);
      box-shadow: 0 0 10px var(--neon-red-glow);
    }

    .step.completed::after {
      background: var(--success);
    }

    .step:hover {
      background: var(--surface-1);
    }

    .step-number {
      width: 28px;
      height: 28px;
      border: 2px solid var(--text-muted);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Orbitron', sans-serif;
      font-size: 0.75rem;
      font-weight: 700;
      transition: all 0.3s ease;
    }

    .step.active .step-number {
      border-color: var(--neon-red);
      color: var(--neon-red);
      box-shadow: 0 0 10px var(--neon-red-glow);
    }

    .step.completed .step-number {
      border-color: var(--success);
      background: var(--success);
      color: var(--carbon-dark);
    }

    .step-label {
      font-size: 0.85rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-muted);
      transition: color 0.3s ease;
    }

    .step.active .step-label,
    .step.completed .step-label {
      color: var(--text-primary);
    }

    /* Content Area */
    .wizard-content {
      padding: 2.5rem;
      min-height: 400px;
    }

    .step-panel {
      display: none;
      animation: fadeSlideIn 0.4s ease;
    }

    .step-panel.active {
      display: block;
    }

    @keyframes fadeSlideIn {
      from {
        opacity: 0;
        transform: translateX(20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .panel-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.1rem;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      margin-bottom: 0.5rem;
      color: var(--neon-blue);
    }

    .panel-subtitle {
      font-size: 0.9rem;
      color: var(--text-secondary);
      margin-bottom: 2rem;
    }

    /* Form Elements */
    .form-grid {
      display: grid;
      gap: 1.5rem;
    }

    .form-grid-2 {
      grid-template-columns: repeat(2, 1fr);
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .form-group.full-width {
      grid-column: 1 / -1;
    }

    label {
      font-size: 0.8rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--text-secondary);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    label .required {
      color: var(--neon-red);
    }

    label .optional {
      font-size: 0.7rem;
      font-weight: 400;
      color: var(--text-muted);
      text-transform: none;
      letter-spacing: 0;
    }

    input[type="text"],
    input[type="number"],
    textarea,
    select {
      background: var(--surface-1);
      border: 1px solid var(--border-subtle);
      border-radius: 3px;
      padding: 0.875rem 1rem;
      font-family: 'Rajdhani', sans-serif;
      font-size: 1rem;
      font-weight: 500;
      color: var(--text-primary);
      transition: all 0.2s ease;
    }

    input[type="text"]:focus,
    input[type="number"]:focus,
    textarea:focus,
    select:focus {
      outline: none;
      border-color: var(--neon-blue);
      box-shadow: 0 0 0 3px var(--neon-blue-glow);
    }

    input::placeholder,
    textarea::placeholder {
      color: var(--text-muted);
    }

    textarea {
      resize: vertical;
      min-height: 100px;
    }

    .slug-preview {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 0.75rem;
      background: var(--carbon-dark);
      border-radius: 3px;
      margin-top: 0.5rem;
    }

    .slug-preview .icon {
      width: 16px;
      height: 16px;
    }

    .slug-preview .icon.checking {
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .slug-preview .slug-text {
      font-family: monospace;
      font-size: 0.85rem;
      color: var(--success);
    }

    .slug-preview.taken .slug-text {
      color: var(--warning);
    }

    /* Toggle Switches */
    .toggle-group {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .toggle-item {
      display: flex;
      align-items: flex-start;
      gap: 1rem;
      padding: 1rem;
      background: var(--surface-1);
      border: 1px solid var(--border-subtle);
      border-radius: 4px;
      transition: all 0.2s ease;
    }

    .toggle-item:hover {
      border-color: var(--text-muted);
    }

    .toggle-item.active {
      border-color: var(--neon-blue);
      background: rgba(0, 229, 255, 0.05);
    }

    .toggle-switch {
      position: relative;
      width: 48px;
      height: 26px;
      flex-shrink: 0;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: var(--carbon-dark);
      border: 2px solid var(--text-muted);
      border-radius: 26px;
      transition: all 0.3s ease;
    }

    .toggle-slider::before {
      position: absolute;
      content: '';
      height: 18px;
      width: 18px;
      left: 2px;
      bottom: 2px;
      background: var(--text-muted);
      border-radius: 50%;
      transition: all 0.3s ease;
    }

    .toggle-switch input:checked + .toggle-slider {
      background: var(--neon-blue);
      border-color: var(--neon-blue);
      box-shadow: 0 0 15px var(--neon-blue-glow);
    }

    .toggle-switch input:checked + .toggle-slider::before {
      transform: translateX(22px);
      background: white;
    }

    .toggle-content {
      flex: 1;
    }

    .toggle-label {
      font-size: 0.95rem;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 0.25rem;
    }

    .toggle-description {
      font-size: 0.8rem;
      color: var(--text-muted);
      line-height: 1.4;
    }

    /* Nested Settings Panel */
    .nested-panel {
      margin-top: 1rem;
      padding: 1.25rem;
      background: var(--carbon-dark);
      border-left: 3px solid var(--neon-blue);
      border-radius: 0 4px 4px 0;
      display: none;
      animation: slideDown 0.3s ease;
    }

    .nested-panel.visible {
      display: block;
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .nested-panel .panel-header {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 1rem;
      padding-bottom: 0.75rem;
      border-bottom: 1px solid var(--border-subtle);
    }

    .nested-panel .panel-header svg {
      width: 18px;
      height: 18px;
      fill: var(--neon-blue);
    }

    .nested-panel .panel-header span {
      font-family: 'Orbitron', sans-serif;
      font-size: 0.8rem;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--neon-blue);
    }

    /* Drag and Drop List */
    .drag-list {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .drag-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 0.875rem 1rem;
      background: var(--surface-2);
      border: 1px solid var(--border-subtle);
      border-radius: 4px;
      cursor: grab;
      transition: all 0.2s ease;
    }

    .drag-item:hover {
      border-color: var(--neon-blue);
      transform: translateX(4px);
    }

    .drag-item:active {
      cursor: grabbing;
    }

    .drag-handle {
      color: var(--text-muted);
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .drag-handle span {
      display: block;
      width: 16px;
      height: 2px;
      background: currentColor;
      border-radius: 1px;
    }

    .drag-position {
      width: 28px;
      height: 28px;
      background: var(--neon-red);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Orbitron', sans-serif;
      font-size: 0.75rem;
      font-weight: 700;
      flex-shrink: 0;
    }

    .drag-content {
      flex: 1;
    }

    .drag-title {
      font-weight: 600;
      margin-bottom: 0.125rem;
    }

    .drag-description {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    /* Image Upload */
    .upload-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1.5rem;
    }

    .upload-zone {
      border: 2px dashed var(--border-subtle);
      border-radius: 8px;
      padding: 2rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      background: var(--surface-1);
    }

    .upload-zone:hover {
      border-color: var(--neon-blue);
      background: rgba(0, 229, 255, 0.03);
    }

    .upload-zone.has-file {
      border-style: solid;
      border-color: var(--success);
    }

    .upload-icon {
      width: 48px;
      height: 48px;
      margin: 0 auto 1rem;
      opacity: 0.4;
    }

    .upload-zone:hover .upload-icon {
      opacity: 0.8;
    }

    .upload-title {
      font-weight: 600;
      margin-bottom: 0.25rem;
    }

    .upload-hint {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .upload-preview {
      width: 100%;
      max-height: 120px;
      object-fit: contain;
      border-radius: 4px;
      margin-bottom: 0.5rem;
    }

    /* Footer */
    .wizard-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.5rem 2.5rem;
      background: var(--carbon-dark);
      border-top: 1px solid var(--border-subtle);
    }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.875rem 1.5rem;
      font-family: 'Orbitron', sans-serif;
      font-size: 0.8rem;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      border: none;
      border-radius: 3px;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .btn-ghost {
      background: transparent;
      color: var(--text-secondary);
      border: 1px solid var(--border-subtle);
    }

    .btn-ghost:hover {
      background: var(--surface-1);
      border-color: var(--text-muted);
      color: var(--text-primary);
    }

    .btn-secondary {
      background: var(--surface-2);
      color: var(--text-primary);
      border: 1px solid var(--text-muted);
    }

    .btn-secondary:hover {
      background: var(--surface-1);
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--neon-red) 0%, #ff4569 100%);
      color: white;
      box-shadow: 0 4px 15px var(--neon-red-glow);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px var(--neon-red-glow);
    }

    .btn-primary:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }

    .btn svg {
      width: 16px;
      height: 16px;
      fill: currentColor;
    }

    .footer-actions {
      display: flex;
      gap: 0.75rem;
    }

    /* Progress Indicator */
    .progress-bar {
      position: absolute;
      bottom: 0;
      left: 0;
      height: 3px;
      background: var(--neon-blue);
      transition: width 0.4s ease;
      box-shadow: 0 0 10px var(--neon-blue-glow);
    }

    @media (max-width: 768px) {
      .stepper {
        flex-direction: column;
      }

      .step {
        border-right: none;
        border-bottom: 1px solid var(--border-subtle);
      }

      .form-grid-2 {
        grid-template-columns: 1fr;
      }

      .upload-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="wizard-container">
    <!-- Header -->
    <div class="wizard-header">
      <div class="header-content">
        <div class="header-icon">
          <svg viewBox="0 0 24 24"><path d="M12 2L4 5v6.09c0 5.05 3.41 9.76 8 10.91 4.59-1.15 8-5.86 8-10.91V5l-8-3zm-1 14h2v2h-2v-2zm0-8h2v6h-2V8z"/></svg>
        </div>
        <div class="header-text">
          <h1>Season Configuration</h1>
          <p>Configure championship season settings and rules</p>
        </div>
        <div class="mode-badge" id="modeBadge">Create Mode</div>
      </div>
    </div>

    <!-- Stepper -->
    <div class="stepper">
      <div class="step active" data-step="1" onclick="goToStep(1)">
        <div class="step-number">1</div>
        <span class="step-label">Basic Info</span>
      </div>
      <div class="step" data-step="2" onclick="goToStep(2)">
        <div class="step-number">2</div>
        <span class="step-label">Rules</span>
      </div>
      <div class="step" data-step="3" onclick="goToStep(3)">
        <div class="step-number">3</div>
        <span class="step-label">Championships</span>
      </div>
      <div class="step" data-step="4" onclick="goToStep(4)">
        <div class="step-number">4</div>
        <span class="step-label">Branding</span>
      </div>
    </div>

    <!-- Content -->
    <div class="wizard-content">
      <!-- Step 1: Basic Info -->
      <div class="step-panel active" id="step1">
        <h2 class="panel-title">Season Identity</h2>
        <p class="panel-subtitle">Define the core information for your championship season</p>

        <div class="form-grid form-grid-2">
          <div class="form-group">
            <label>Season Name <span class="required">*</span></label>
            <input type="text" id="seasonName" placeholder="e.g., Season 1, 2024 Winter Championship" oninput="updateSlug()">
            <div class="slug-preview" id="slugPreview" style="display: none;">
              <svg class="icon" viewBox="0 0 24 24" fill="#00e676"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
              <span class="slug-text">/seasons/<span id="slugText">season-1</span></span>
            </div>
          </div>

          <div class="form-group">
            <label>Car Class <span class="optional">(Optional)</span></label>
            <input type="text" placeholder="e.g., GT3, Formula 1, LMP1">
          </div>

          <div class="form-group full-width">
            <label>Description <span class="optional">(Optional)</span></label>
            <textarea placeholder="Describe this season, race format, rules..."></textarea>
          </div>

          <div class="form-group full-width">
            <label>Technical Specifications <span class="optional">(Optional)</span></label>
            <textarea placeholder="Car setup rules, performance restrictions, balance of performance..."></textarea>
          </div>
        </div>
      </div>

      <!-- Step 2: Rules -->
      <div class="step-panel" id="step2">
        <h2 class="panel-title">Race Rules</h2>
        <p class="panel-subtitle">Configure timing and scoring rules for this season</p>

        <div class="toggle-group">
          <div class="toggle-item" id="raceTimesToggle">
            <label class="toggle-switch">
              <input type="checkbox" id="raceTimesRequired" checked onchange="toggleItem('raceTimesToggle', this.checked)">
              <span class="toggle-slider"></span>
            </label>
            <div class="toggle-content">
              <div class="toggle-label">Require Race Times</div>
              <div class="toggle-description">Lap times must be recorded for all race results</div>
            </div>
          </div>

          <div class="toggle-item" id="dropRoundToggle">
            <label class="toggle-switch">
              <input type="checkbox" id="dropRoundEnabled" onchange="toggleDropRound(this.checked)">
              <span class="toggle-slider"></span>
            </label>
            <div class="toggle-content">
              <div class="toggle-label">Enable Drop Rounds</div>
              <div class="toggle-description">Exclude lowest scoring rounds from final championship standings</div>

              <div class="nested-panel" id="dropRoundPanel">
                <div class="panel-header">
                  <svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14l-5-5 1.41-1.41L12 14.17l6.59-6.59L20 9l-8 8z"/></svg>
                  <span>Drop Configuration</span>
                </div>
                <div class="form-group">
                  <label>Total Drop Rounds</label>
                  <input type="number" min="0" max="10" value="1" style="max-width: 120px;">
                </div>
              </div>
            </div>
          </div>

          <div class="toggle-item" id="tiebreakerToggle">
            <label class="toggle-switch">
              <input type="checkbox" id="tiebreakerEnabled" onchange="toggleTiebreaker(this.checked)">
              <span class="toggle-slider"></span>
            </label>
            <div class="toggle-content">
              <div class="toggle-label">Enable Tiebreaker Rules</div>
              <div class="toggle-description">Apply tiebreaker rules when drivers have equal points</div>

              <div class="nested-panel" id="tiebreakerPanel">
                <div class="panel-header">
                  <svg viewBox="0 0 24 24"><path d="M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z"/></svg>
                  <span>Rule Priority Order</span>
                </div>
                <p style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 1rem;">Drag to reorder. Rules apply top to bottom until tie is broken.</p>
                <div class="drag-list" id="tiebreakerList">
                  <div class="drag-item" draggable="true">
                    <div class="drag-handle"><span></span><span></span><span></span></div>
                    <div class="drag-position">1</div>
                    <div class="drag-content">
                      <div class="drag-title">Most Wins</div>
                      <div class="drag-description">Driver with more race wins ranks higher</div>
                    </div>
                  </div>
                  <div class="drag-item" draggable="true">
                    <div class="drag-handle"><span></span><span></span><span></span></div>
                    <div class="drag-position">2</div>
                    <div class="drag-content">
                      <div class="drag-title">Most Podiums</div>
                      <div class="drag-description">Driver with more podium finishes ranks higher</div>
                    </div>
                  </div>
                  <div class="drag-item" draggable="true">
                    <div class="drag-handle"><span></span><span></span><span></span></div>
                    <div class="drag-position">3</div>
                    <div class="drag-content">
                      <div class="drag-title">Best Race Result</div>
                      <div class="drag-description">Driver with better individual race result ranks higher</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Step 3: Championships -->
      <div class="step-panel" id="step3">
        <h2 class="panel-title">Championship Modes</h2>
        <p class="panel-subtitle">Enable additional championship formats</p>

        <div class="toggle-group">
          <div class="toggle-item" id="divisionsToggle">
            <label class="toggle-switch">
              <input type="checkbox" id="divisionsEnabled" onchange="toggleItem('divisionsToggle', this.checked)">
              <span class="toggle-slider"></span>
            </label>
            <div class="toggle-content">
              <div class="toggle-label">Division Championship</div>
              <div class="toggle-description">Organize drivers into competitive divisions for balanced racing</div>
            </div>
          </div>

          <div class="toggle-item" id="teamChampToggle">
            <label class="toggle-switch">
              <input type="checkbox" id="teamChampEnabled" onchange="toggleTeamChamp(this.checked)">
              <span class="toggle-slider"></span>
            </label>
            <div class="toggle-content">
              <div class="toggle-label">Team Championship</div>
              <div class="toggle-description">Track team standings alongside individual driver championship</div>

              <div class="nested-panel" id="teamChampPanel">
                <div class="panel-header">
                  <svg viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
                  <span>Team Settings</span>
                </div>

                <div class="form-grid" style="gap: 1rem;">
                  <div class="form-group">
                    <label>Drivers for Team Calculation</label>
                    <select id="teamDriversCount">
                      <option value="all">All Drivers</option>
                      <option value="1">Top 1 Driver</option>
                      <option value="2" selected>Top 2 Drivers</option>
                      <option value="3">Top 3 Drivers</option>
                      <option value="4">Top 4 Drivers</option>
                      <option value="5">Top 5 Drivers</option>
                    </select>
                  </div>

                  <div class="toggle-item" id="teamDropToggle" style="margin-top: 0.5rem;">
                    <label class="toggle-switch">
                      <input type="checkbox" id="teamDropEnabled" onchange="toggleTeamDrop(this.checked)">
                      <span class="toggle-slider"></span>
                    </label>
                    <div class="toggle-content">
                      <div class="toggle-label">Team Drop Rounds</div>
                      <div class="toggle-description">Exclude lowest rounds from team standings</div>

                      <div class="nested-panel" id="teamDropPanel">
                        <div class="form-group">
                          <label>Team Drop Rounds</label>
                          <input type="number" min="0" max="10" value="1" style="max-width: 120px;">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Step 4: Branding -->
      <div class="step-panel" id="step4">
        <h2 class="panel-title">Season Branding</h2>
        <p class="panel-subtitle">Upload custom logos and banners for this season</p>

        <div class="upload-grid">
          <div class="upload-zone" onclick="document.getElementById('logoInput').click()">
            <input type="file" id="logoInput" accept="image/*" hidden onchange="handleFileUpload(this, 'logoPreview')">
            <img id="logoPreview" class="upload-preview" style="display: none;">
            <svg class="upload-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-1 16H6c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v12c0 .55-.45 1-1 1zm-4.44-6.19l-2.35 3.02-1.56-1.88c-.2-.25-.58-.24-.78.01l-1.74 2.23c-.26.33-.02.81.39.81h8.98c.41 0 .65-.47.4-.8l-2.55-3.39c-.19-.26-.59-.26-.79 0z"/></svg>
            <div class="upload-title">Season Logo</div>
            <div class="upload-hint">Square, 500x500px recommended</div>
          </div>

          <div class="upload-zone" onclick="document.getElementById('bannerInput').click()">
            <input type="file" id="bannerInput" accept="image/*" hidden onchange="handleFileUpload(this, 'bannerPreview')">
            <img id="bannerPreview" class="upload-preview" style="display: none;">
            <svg class="upload-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M4 4h16v12H4zm0 14h16v2H4z"/></svg>
            <div class="upload-title">Season Banner</div>
            <div class="upload-hint">Wide format, 1920x400px recommended</div>
          </div>
        </div>

        <div style="margin-top: 1.5rem; padding: 1rem; background: var(--surface-1); border-radius: 4px; border-left: 3px solid var(--neon-blue);">
          <div style="display: flex; align-items: center; gap: 0.5rem; color: var(--neon-blue); margin-bottom: 0.5rem;">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>
            <span style="font-weight: 600; font-size: 0.9rem;">Note</span>
          </div>
          <p style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.5;">If no custom logo is uploaded, the season will inherit the competition logo. You can always update branding later.</p>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <div class="wizard-footer">
      <button class="btn btn-ghost" id="cancelBtn">
        <svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        Cancel
      </button>

      <div class="footer-actions">
        <button class="btn btn-secondary" id="prevBtn" onclick="prevStep()" style="display: none;">
          <svg viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>
          Previous
        </button>
        <button class="btn btn-primary" id="nextBtn" onclick="nextStep()">
          Next Step
          <svg viewBox="0 0 24 24"><path d="M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"/></svg>
        </button>
        <button class="btn btn-primary" id="submitBtn" onclick="submitForm()" style="display: none;">
          <svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
          Create Season
        </button>
      </div>
    </div>
  </div>

  <script>
    let currentStep = 1;
    const totalSteps = 4;

    function goToStep(step) {
      if (step < 1 || step > totalSteps) return;

      // Update step indicators
      document.querySelectorAll('.step').forEach((el, i) => {
        el.classList.remove('active');
        if (i + 1 < step) {
          el.classList.add('completed');
        } else {
          el.classList.remove('completed');
        }
        if (i + 1 === step) {
          el.classList.add('active');
        }
      });

      // Update panels
      document.querySelectorAll('.step-panel').forEach((el, i) => {
        el.classList.remove('active');
        if (i + 1 === step) {
          el.classList.add('active');
        }
      });

      currentStep = step;
      updateNavigation();
    }

    function nextStep() {
      goToStep(currentStep + 1);
    }

    function prevStep() {
      goToStep(currentStep - 1);
    }

    function updateNavigation() {
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');
      const submitBtn = document.getElementById('submitBtn');

      prevBtn.style.display = currentStep > 1 ? 'inline-flex' : 'none';
      nextBtn.style.display = currentStep < totalSteps ? 'inline-flex' : 'none';
      submitBtn.style.display = currentStep === totalSteps ? 'inline-flex' : 'none';
    }

    function updateSlug() {
      const name = document.getElementById('seasonName').value;
      const slugPreview = document.getElementById('slugPreview');
      const slugText = document.getElementById('slugText');

      if (name.length >= 3) {
        slugPreview.style.display = 'flex';
        slugText.textContent = name.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-|-$/g, '');
      } else {
        slugPreview.style.display = 'none';
      }
    }

    function toggleItem(itemId, checked) {
      const item = document.getElementById(itemId);
      if (checked) {
        item.classList.add('active');
      } else {
        item.classList.remove('active');
      }
    }

    function toggleDropRound(checked) {
      toggleItem('dropRoundToggle', checked);
      const panel = document.getElementById('dropRoundPanel');
      panel.classList.toggle('visible', checked);
    }

    function toggleTiebreaker(checked) {
      toggleItem('tiebreakerToggle', checked);
      const panel = document.getElementById('tiebreakerPanel');
      panel.classList.toggle('visible', checked);
    }

    function toggleTeamChamp(checked) {
      toggleItem('teamChampToggle', checked);
      const panel = document.getElementById('teamChampPanel');
      panel.classList.toggle('visible', checked);
    }

    function toggleTeamDrop(checked) {
      toggleItem('teamDropToggle', checked);
      const panel = document.getElementById('teamDropPanel');
      panel.classList.toggle('visible', checked);
    }

    function handleFileUpload(input, previewId) {
      const file = input.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const preview = document.getElementById(previewId);
          preview.src = e.target.result;
          preview.style.display = 'block';
          input.closest('.upload-zone').classList.add('has-file');
        };
        reader.readAsDataURL(file);
      }
    }

    function submitForm() {
      alert('Season created successfully!');
    }

    // Initialize with race times checked
    toggleItem('raceTimesToggle', true);
  </script>
</body>
</html>
